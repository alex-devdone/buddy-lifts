name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

permissions:
  statuses: write

jobs:
  ci:
    runs-on: ubuntu-latest
    env:
      NEXT_PUBLIC_SUPABASE_URL: https://placeholder.supabase.co
      NEXT_PUBLIC_SUPABASE_ANON_KEY: placeholder-anon-key
      DATABASE_URL: postgresql://user:pass@localhost:5432/db
      BETTER_AUTH_SECRET: ci-placeholder-secret-key-32chars
      BETTER_AUTH_URL: http://localhost:3000
      CORS_ORIGIN: http://localhost:3000
    steps:
      - uses: actions/checkout@v4
      - uses: oven-sh/setup-bun@v2
      - run: bun install --frozen-lockfile
      - run: bun run prepush
      - name: Notify Vercel
        uses: vercel/repository-dispatch/actions/status@v1
        with:
          name: "Vercel - buddy-lifts-web: lint"
