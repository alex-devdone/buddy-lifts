2026-01-25 - Phase 1 Database Schema: Created all database tables (training, exercise, trainingSession, sessionParticipant, exerciseProgress, friend) in packages/db/src/schema/training.ts with proper relations and indexes. Exported schemas and ran db:push to sync with Supabase. Linting and build passed.
2026-01-25 - Phase 1 Authentication Enhancement: Added Google OAuth provider to Better-Auth in packages/auth/src/index.ts with socialProviders configuration. Added GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET optional environment variables to packages/env/src/server.ts. Updated apps/web/src/lib/auth-client.ts with baseURL configuration for OAuth flow. Linting passed, build succeeded.
2026-01-25 - Phase 2 Training Router: Created packages/api/src/routers/training.ts with create, update, and delete mutations for trainings using protectedProcedure. All operations include proper authorization checks to ensure users can only modify their own trainings. Registered training router in packages/api/src/routers/index.ts. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 2 Exercise Router: Created packages/api/src/routers/exercise.ts with create, createMany, update, delete, and deleteByTraining mutations for exercises using protectedProcedure. All operations include proper authorization checks to ensure users can only modify exercises in their own trainings. Registered exercise router in packages/api/src/routers/index.ts. Linting passed, type checking passed.
2026-01-25 - Phase 2 Invite System: Created packages/api/src/utils/invite-code.ts with generateInviteCode and isValidInviteCode utilities using nanoid with safe alphabet (no ambiguous characters). Provides ~2.8 trillion possible combinations. Installed nanoid package.
2026-01-25 - Phase 2 Session Router: Created packages/api/src/routers/session.ts with start, end, join, leave, and updateAccess mutations using protectedProcedure. Implements invite code generation with collision detection, authorization checks (host-only operations), and proper error handling. Registered session router in packages/api/src/routers/index.ts. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 2 Progress Router: Created packages/api/src/routers/progress.ts with record, update, delete, getBySession, and calculatePercentage operations using protectedProcedure. record mutation creates or updates exercise progress with completed reps array. Users can only modify their own progress. getBySession query returns all progress for a session with optional user filtering. calculatePercentage computes completion percentage comparing completed reps against target reps/sets. Registered progress router in packages/api/src/routers/index.ts. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 2 Exercise Parser Router: Created packages/api/src/routers/exercise-parser.ts with AI-powered text-to-exercises parsing. Supports multiple formats: "10x4 pushup" (standard), "10,10,8,6 pull ups" (comma-separated reps), "5 sets of 10 pushups" (natural language), and handles weight (lbs/kg) and rest times. Includes parse mutation for preview and parseAndCreate mutation for direct database insertion with training ownership verification. Created comprehensive test suite in packages/api/src/routers/__tests__/exercise-parser.test.ts with 25 tests covering all patterns, edge cases, and real-world examples. All tests pass. Added test script to packages/api/package.json. Registered exerciseParser router in packages/api/src/routers/index.ts. Linting passed.
2026-01-25 - Phase 2 Friend Router: Created packages/api/src/routers/friend.ts with friend relationship management mutations using protectedProcedure. Includes send mutation for creating pending friend requests with duplicate/prevention logic, accept mutation for accepting pending requests (only requests sent to current user), reject mutation for deleting pending requests, remove mutation for removing friends or canceling own pending requests, and block mutation for blocking users (updates existing relationship or creates new blocked status). All operations include proper authorization checks and bidirectional relationship handling. Registered friend router in packages/api/src/routers/index.ts. Created test suite in packages/api/src/routers/__tests__/friend.test.ts with structural and business logic validation tests. All tests pass (37 tests). Linting passed, type checking passed.
2026-01-25 - Phase 2 AI Summary Router: Created packages/api/src/routers/ai-summary.ts with AI-powered training summary generation comparing participants' performance. Includes three queries: generate (full summary with comparisons, highlights, and insights), quickSummary (lightweight key stats), and personalSummary (individual user's performance). Implements calculateExercisePercentage for computing completion rates, generateHighlights for individual performance feedback, generateComparisons for participant rankings with tie detection, and generateSessionInsights for session-wide analysis including team effort and close competition detection. Created comprehensive test suite in packages/api/src/routers/__tests__/ai-summary.test.ts with 28 tests covering percentage calculation, highlights, comparisons, session insights, and integration scenarios. All tests pass (59 total tests across all router test files). Registered aiSummary router in packages/api/src/routers/index.ts. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 3 Training Card Component: Created apps/web/src/components/training/training-card.tsx - mobile-first training preview card component. Displays training name, description (with line-clamp), exercise count (fetched via Supabase), and creation time (using date-fns formatDistanceToNow). Includes edit/delete dropdown menu with proper authorization checks (only shows for owner). Uses shadcn/ui Card components and follows hybrid pattern (read from Supabase, write via tRPC). Icon button uses lucide-react Dumbbell and MoreVertical icons. Mobile-responsive with Tailwind CSS. Installed date-fns dependency. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 3 Training Form Component: Created apps/web/src/components/training/training-form.tsx - mobile-first create/edit training form component. Supports both creating new trainings and editing existing ones. Uses @tanstack/react-form with @tanstack/react-query mutations via tRPC. Includes name (required) and description (optional) fields with proper validation. Shows toast notifications for success/error states. Implements onSuccess and onCancel callbacks for flexible integration. Follows mobile-first design with max-w-md container and responsive spacing. Also created apps/web/src/components/ui/textarea.tsx as a new UI component (native textarea with Tailwind styling matching the input component). Linting passed, build succeeded.
2026-01-25 - Phase 3 Exercise Parser Input Component: Created apps/web/src/components/training/exercise-parser-input.tsx - mobile-first natural language input component with AI parsing. Features two tRPC mutations: parse (preview only) and parseAndCreate (saves to database). Supports multiple exercise formats: "10x4 pushup", "5 sets of 10 bench press", "10,10,8,6 pull ups". Handles weight specification with "@ 135lbs" and rest times. Includes preview mode showing parsed exercises with exercise.name, targetSets, targetReps, weight, and restSeconds. Provides three actions: Add to Training (append), Replace All (delete existing first), and Clear. Uses lucide-react icons (Sparkles, Loader2, X) and shadcn/ui components (Button, Textarea). Mobile-first responsive design with max-w-2xl container and flex-wrap button layout. Created comprehensive test suite in apps/web/src/components/training/__tests__/exercise-parser-input.test.ts with 11 tests covering component structure, dependencies, props, state management, preview functionality, error handling, and responsive design. All tests pass. Linting passed (with pre-existing warning about router.push type assertion in training-form.tsx), build succeeded.
2026-01-25 - Phase 3 Exercise List Component: Created apps/web/src/components/training/exercise-list.tsx - mobile-first sortable exercise list with drag-drop reordering. Displays exercises for a training with order numbers, sets/reps, weight, and rest times. Features drag-and-drop reordering using HTML5 Drag and Drop API, move up/down buttons for accessibility, edit/delete actions via dropdown menu (owner only), and view-only mode for non-owners. Uses hybrid pattern: reads from Supabase with useSupabaseQuery (real-time enabled), writes via tRPC mutations (update, delete). Shows loading skeletons while fetching and empty state with dumbbell icon when no exercises. Includes proper ownership checks (isOwner), disabled states for boundary items, and confirmation dialogs for deletion. Mobile-first responsive design with truncate for long text and proper ARIA labels for accessibility. Created comprehensive test suite in apps/web/src/components/training/__tests__/exercise-list.test.ts with 28 tests covering component structure, dependencies, props, type safety, state management, data access patterns, component features (drag-drop, edit/delete, loading, empty states), accessibility (ARIA labels, screen reader text), responsive design (mobile-first classes, truncation), business logic (ownership checks, boundary conditions), real-time updates, and error handling. All 59 tests pass (37 friend + 28 ai-summary + 28 exercise-list). Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 3 Session Lobby Component: Created apps/web/src/components/session/session-lobby.tsx - mobile-first waiting room component for training sessions. Features: invite code display with copy link button (host only), access type toggle between read/admin (host only), real-time participant list with user info and roles, leave session button for non-host participants, end session button for host, session status indicator (pending/active/completed), loading and error states, confirmation dialogs for destructive actions. Uses hybrid pattern: reads session and participant data from Supabase with useSupabaseQuery (real-time enabled), writes via tRPC mutations (updateAccess, leave, end). Fetches current user from Supabase auth to determine host status. Mobile-first responsive design with max-w-md container, proper toast notifications, and accessible UI using lucide-react icons (Copy, Loader2, Lock, LockOpen, Users). Created comprehensive test suite in apps/web/src/components/session/__tests__/session-lobby.test.ts with 31 tests covering component structure, dependencies, props, type safety, state management, data access patterns, component features (invite code, access toggle, participants list, loading/error states), accessibility (ARIA labels), responsive design, business logic (host detection, role display), real-time subscriptions, and event handlers. Linting passed, type checking passed, build succeeded.
2026-01-25 - Phase 3 UI Dialog Component: Created apps/web/src/components/ui/dialog.tsx - reusable dialog component using @base-ui/react Dialog primitive. Includes Dialog, DialogPortal, DialogTrigger, DialogClose, DialogBackdrop, DialogContent, DialogHeader, DialogFooter, DialogTitle, and DialogDescription components. Features proper animations with fade, zoom, and slide transitions, backdrop support, and accessibility attributes. Follows project patterns with cn utility for className merging and data-slot attributes for styling. Uses forwardRef for DialogContent to support ref forwarding. Mobile-first responsive design with max-w-lg content width and proper z-index layering. Linting passed.
2026-01-25 - Phase 3 Invite Link Dialog Component: Created apps/web/src/components/session/invite-link-dialog.tsx - mobile-first dialog component for generating and sharing invite links with configurable access levels. Features: displays invite code with copy button, shows full invite URL for sharing, toggle access type between read/admin (host only), host/non-host conditional rendering, controlled and uncontrolled state support, custom trigger support, loading and error states. Uses hybrid pattern: reads session data from Supabase with useSupabaseQuery (real-time enabled), writes via tRPC mutations (updateAccess). Generates invite URL in format /join/{code}. Includes proper toast notifications for copy actions and access updates. Mobile-first responsive design with max-w-md container, break-all for long URLs, proper ARIA labels for accessibility. Created comprehensive test suite in apps/web/src/components/session/__tests__/invite-link-dialog.test.ts with 33 tests covering component structure, dependencies, props, type safety, state management, data access patterns, component features (invite code, URL display, access toggle, loading/error states), accessibility (ARIA labels, sr-only text), responsive design, business logic (host detection, access level display), and SSR safety for window object. All 64 tests pass (31 session-lobby + 33 invite-link-dialog). Linting passed.
